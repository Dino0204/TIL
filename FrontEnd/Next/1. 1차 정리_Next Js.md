# Next.js

## 개발 환경 설정

---

설치

```jsx
npx create-next-app@latest
```

## Next.js란?

---

풀 스택 프로그램을 구축하기 위한 React 프레임 워크
번들링, 컴파일과 같은 작업을 추상화하고 자동으로 구성
SSR,SSG,ISR과 같은 다양한 렌더링 방식을 제공

> **추상화란?** (구체화의 반대 개념)
> 자식 컴포넌트에서 공통된 부분을 뽑아내 부모컴포넌트를 제작하는 것

## Routing

---

react-router-dom 설치 필요 없음
routes , route 같은 컴포넌트 필요 없음
-> **APP Directory 라우팅 구조 : 설정된 폴더구조로부터 route를 도출함
동적 경로의 경우 [id].js와 같은 페이지명을 통해 지정**

### App Router

**특징**

- 서버 중심 라우팅
- React Server Components기반
- 경로 이동시 페이지를 재렌더링하지 않고, SPA처럼 URL만 업데이트함
- 우선순위 : Pages Router보다 높음
- **Data Fetching** 동시에 가능
- **Parallel Routes**
  - 동일한 레이아웃에서 하나 이상의 페이지를 동시/조건부 렌더링이 가능
- **Interceipting Routes**
  - 현재 페이지의 컨텍스트를 유지하며 현재 레이아웃 내에서 경로를 로드
- **APP Directory**
  - root 레이아웃 필수
  - 경로 정의
  - 페이지 파일 → page.js
  - server-side API → route.js

```python
src/app
├─layout.js // root layout. 필수
├─page.js // root page
├─a-page
   └─page.js
└─b-page
  └─page.js
  └─component.js // 라우팅과 관련없는 코드. 라우팅의 대상이 되지 않습니다
    └─b-subpage
    └─page.js
```

### Pages Router

- 클라이언트 중심 라우팅 (CSR)
- 라우팅 필요없는 파일도 경로가 생김
- Data Fetching과 component를 함께 배치 불가능
- **Pages Directory**
  - 하위 Js파일이 모두 페이지 / API의 경로

```python
src/pages
├─_app.js // root layout
├─index.js // root page
├─a-page.js
└─b-page
  └─index.js
   └─component.js // 라우팅과 관련없는 코드지만 b-page/component라는 경로가 생깁니다.
   └─b-subpage.js
```

## Rendering

---

SSR (Server side rendering)

CSR (Client side rendering)

SSG

ISR

### SSR

- **서버에서 페이지를 렌더링하여 완전히 렌더링된 HTML을 클라이언트로 전송하는 방식**
- 함수
  - getServerSideProps
  - getInitialProps
  - → 서버사이드 렌더링 구현
- DOM에 각 스크립트 코드를 하이드레이션
  - SSR이지만 페이지 새로고침 없이 웹 페이지와의 상호작용이 가능
  - → SPA처럼 작동하는 SSR웹앱
- 장점
  1. 안정성 증가
     페이지를 서버에서 렌더링하여 API호출, 키관리, 데이터 검증등르 서버에서 수행함
  2. 초기 로딩 속도 개선
  3. 검색 엔진 최적화(SEO)
  4. 웹사이트 제공 범위 확대
     서버에서 렌더링을 하기 때문에 Js 사용불가능 환경에서도 사용가능
- 단점
  1. 자원 소모, 서버 부하 증가
  2. 페이지 이동 시 처리 시간 증가
     - 페이지 렌더링 시마다 데이터, API 접근
       → 해결책 : Next js

```python
Hydration
브라우저에서 HTML을 렌더링할 때 페이지의 컴파일된 HTML에
JavaScript 동작을 다시 추가하는 프로세스

SSR에서 HTML을 렌더링 시 정적인 화면만이 나타남( Js 렌더링 x)
그다음 Js 번들 다운로드 및 실행
React Virtual DOM 생성 DOM과 비교하여 Js를 연결함
-> 정적 HTML과 React Component 동기화

장점 : 초기 페이지 로드가 빠름

단계
1. 초기 HTML 전송: 서버는 정적 HTML 파일을 전송하여 빠른 초기 페이지 로드를 보장함
2. JavaScript 번들 로드: 브라우저는 필요한 JavaScript 파일들을 다운로드하고 실행
3. Virtual DOM 생성: React는 서버에서 생성된 HTML과 동일한 구조의 가상 DOM을 제작
4. 동기화 : Virtual DOM과 실제 DOM을 비교하여 차이점을 찾아내고, 다시연결함

=> 이 과정이 수행되고 동적기능 사용가능
```

## 출처

---

[NextJS 특징과 차별점은 무엇일까?](https://velog.io/@hyumapr/NextJS-%ED%8A%B9%EC%A7%95%EA%B3%BC-%EC%B0%A8%EB%B3%84%EC%A0%90%EC%9D%80-%EB%AC%B4%EC%97%87%EC%9D%BC%EA%B9%8C)

[6) 객체지향 프로그래밍7 - 추상화](https://velog.io/@dev-mage/hello-java-world-oop-abstraction)

[[Next.js 13] 폴더 구조 + 이쁜 잡기술](https://velog.io/@baby_dev/Next.js-13-%ED%8F%B4%EB%8D%94-%EA%B5%AC%EC%A1%B0-%EC%9D%B4%EC%81%9C-%EC%9E%A1%EA%B8%B0%EC%88%A0)

[React + Typescript 프롭스 타입 정의 하기](https://velog.io/@ovogmap/React-Typescript-2)

[SSR - TOSS](https://toss.tech/article/ssr-server)

[SSG](https://velog.io/@ka0son/%EB%A0%8C%EB%8D%94%EB%A7%81-%EC%82%BC%ED%98%95%EC%A0%9C-CSR-SSR-SSG-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0)

## 클론코딩할 웹사이트

---

[Apple Music 웹 플레이어](https://music.apple.com/kr/new)

[Top 26 K-Pop MVs That Deserve More Views: Female Edition](https://trends.kpopmap.com/top-26-kpop-mvs-that-deserve-more-views-female-edition/)
